(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{117:function(e,t){},161:function(e,t,n){e.exports=n(179)},166:function(e,t,n){},169:function(e,t,n){},172:function(e,t){},179:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),l=n(37),r=n.n(l),i=(n(166),n(133)),s=n(134),c=n(135),u=n(144),m=n(146),f=n(227),p=n(228),h=n(118),d=(n(169),n(30)),v=n(224),g=n(225),E=n(226),b=n(141),y=n.n(b),w=n(219),j=n(232),I=n(233),k=n(229),D={longitude:139.7212733,latitude:35.6606213,zoom:8,pitch:45,bearing:0},C=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).toggleDrawer=function(e,t){return function(){a.setState(Object(i.a)({},e,t))}},a.state={geojsonPoint:null,totalInfo:null,left:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://covid19-japan-web-api.now.sh/api/v1/prefectures").then((function(e){return e.json()})).then((function(t){e.setState({geojsonPoint:e.makeGeoJson(t)}),console.log("result",t),e.GetTotalInfo()}),(function(e){console.log(e)}))}},{key:"makeGeoJson",value:function(e){var t={type:"FeatureCollection",features:[]};return e.forEach((function(e){var n={id:e.id,type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{id:e.id,name:e.name_ja,lat:e.lat,lng:e.lng,cases:e.cases,deaths:e.deaths}};t.features.push(n)})),console.log("retJson",t),t}},{key:"_renderTooltip",value:function(){var e=(this.state||{}).hoveredObject;if(console.log("hoveredObject",e),void 0!==e)return o.a.createElement(h.a,{longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1]},o.a.createElement("div",null,o.a.createElement("p",null,"id: ",e.properties.id),o.a.createElement("p",null,"\u5834\u6240: ",e.properties.name),o.a.createElement("p",null,"\u611f\u67d3\u6570: ",e.properties.cases,"\u4eba"),o.a.createElement("p",null,"\u6b7b\u8005\u6570: ",e.properties.deaths,"\u4eba")))}},{key:"GetTotalInfo",value:function(){var e=this;fetch("https://covid19-japan-web-api.now.sh/api/v1/total").then((function(e){return e.json()})).then((function(t){e.setState({totalInfo:t}),console.log("TotalInfo result",t)}),(function(e){console.log(e)}))}},{key:"_DispTotalInfo",value:function(){if(this.DateConvert(),null!==this.state.totalInfo)return o.a.createElement("div",null,o.a.createElement("p",null,"\u6700\u7d42\u66f4\u65b0\u65e5: ",this.DateConvert(this.state.totalInfo.date)),o.a.createElement("p",null,"\u967d\u6027\u60a3\u8005\u6570: ",this.state.totalInfo.positive,"\u4eba"))}},{key:"DateConvert",value:function(e){if(null!==e){var t=String(e);return t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2)}}},{key:"render",value:function(){var e=this,t=this.props.classes,n=o.a.createElement("div",{className:t.list},o.a.createElement(w.a,null,o.a.createElement(j.a,{button:!0},o.a.createElement(I.a,{primary:"Home"})),o.a.createElement(j.a,{button:!0},o.a.createElement(I.a,{primary:"About"})))),a=this.state.totalInfo,l=this.state.geojsonPoint;console.log("geojsonPoint: ",l),console.log("totalInfoaaaaaaa",a);var r=[new p.a({id:"Point_layer",data:l,getRadius:function(e){return 4e3},getFillColor:function(e){return[245,36,36,150]},pickable:!0,onHover:function(t){return e.setState({hoveredObject:t.object})}})];return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{initialViewState:D,controller:!0,layers:r},o.a.createElement("div",{className:t.root},o.a.createElement(v.a,{position:"relative",color:"inherit"},o.a.createElement(g.a,null,o.a.createElement(E.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:this.toggleDrawer("left",!0)},o.a.createElement(y.a,null)),o.a.createElement(k.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},o.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},n)),"COVID-19 Japan",o.a.createElement("div",{className:t.totalDiv},this._DispTotalInfo())))),o.a.createElement(h.b,{mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxApiAccessToken:"pk.eyJ1IjoieXVzdWtlZWVlZWU1NSIsImEiOiJjazhudGpiczgxMmN5M2dxb3FyMTBvZGUwIn0.4rGM-WGp5mEoCdGQDHEYLA"},this._renderTooltip())))}}]),n}(o.a.Component),O=Object(d.a)({list:{width:250},root:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},totalDiv:{marginLeft:"auto"}})(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[161,1,2]]]);
//# sourceMappingURL=main.bbc49cc3.chunk.js.map